@startuml
skinparam class {
    BackgroundColor White
    BorderColor Black
    ArrowColor Black
}
skinparam linetype ortho
left to right direction
skinparam nodesep 150  
skinparam ranksep 130
title Roamly - Domain Model

' ==================== Core User Hierarchy ====================
class User {
    userId: string
    userName: string
    contactInfo: string
}

class RegisteredTraveler {
    preferences: TravelPreferences
}

class GuestTraveler {
    tempSessionId: string
}

User <|-- RegisteredTraveler
User <|-- GuestTraveler

' ================ Travel Preferences & Companion ================
class TravelPreferences {
    destination: string
    travelDates: DateRange
    interests: List<string>
    budget: double
}

class TravelCompanion {
    name: string
    age: int
    preferences: TravelPreferences
}

class DateRange {
    startDate: date
    endDate: date
}

TravelPreferences "1" --> "1" DateRange : uses
TravelPreferences "1" --> "0..*" TravelCompanion : includes
RegisteredTraveler "1" --> "1" TravelPreferences : sets

' ==================== Itinerary & Planning ====================
class Itinerary {
    itineraryId: string
    travelerId: string
    totalCost: double
}

class DayPlan {
    dayNumber: int
}

class Activity {
    activityId: string
    title: string
    location: string
    time: string
    cost: double
    notes: string
}

Itinerary "1" --> "1..*" DayPlan : includes
DayPlan "1" --> "1..*" Activity : contains

RegisteredTraveler "1" --> "0..*" Itinerary : owns
GuestTraveler "1" --> "0..1" Itinerary : receives

' ==================== Exporting ====================
class ExportRequest {
    format: string
    timestamp: datetime
}

class ExportResult {
    fileUrl: string
    format: string
}

class ExportService {
}

ExportRequest "1" --> "1" Itinerary : for
ExportRequest "1" --> "1" ExportResult : returns
ExportRequest --> ExportService : processedBy

' ==================== Feedback & Admin ====================
class Feedback {
    feedbackId: string
    message: string
    submittedOn: datetime
}

class Admin {
    adminId: string
    role: string
}

class APIHealthCheck {
    apiName: string
    status: string
    checkedAt: datetime
}

RegisteredTraveler "1" --> "0..*" Feedback : submits
Admin "1" --> "0..*" Feedback : reviews
Admin "1" --> "0..*" APIHealthCheck : performs

' ==================== Services ====================
class TravelBookingAPI {
    name: string
    provider: string
}

class MapServiceProvider {
    provider: string
    apiKey: string
}

class AIItineraryEngine {
    modelName: string
    version: string
}

AIItineraryEngine "1" --> "1..*" Itinerary : generates
AIItineraryEngine "1" --> "1" TravelBookingAPI : queries
AIItineraryEngine "1" --> "1" MapServiceProvider : queries
RegisteredTraveler --> AIItineraryEngine : requests

@enduml
